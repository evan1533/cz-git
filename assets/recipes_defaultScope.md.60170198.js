import{_ as s,o as n,c as a,a as l}from"./app.37a504b6.js";const C=JSON.parse('{"title":"defaultScope","description":"","frontmatter":{},"headers":[],"relativePath":"recipes/defaultScope.md","lastUpdated":1656015766000}'),p={name:"recipes/defaultScope.md"},o=l(`<h1 id="defaultscope" tabindex="-1">defaultScope <a class="header-anchor" href="#defaultscope" aria-hidden="true">#</a></h1><ul><li>Obtaining the <code>project scope</code> automatically. Good for when there are a lot of scope options (eg components lib, monorepo). <ul><li>e.g <a href="https://github.com/Tencent/tdesign-vue-next" target="_blank" rel="noopener noreferrer">TDesign-Vue-Next</a>, which is a Vue3 component library with more than 60+ components stored in <code>src</code></li><li>Fortunately, the path structure is clear</li><li>We can get the path of the modified file cache through <code>git status</code></li><li>Perform string matching interception to obtain scope</li><li>passed to defaultScope. pin the top of scope list</li></ul></li></ul><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">// commitlint.config.js</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">execSync</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">require</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&#39;child_process&#39;</span><span style="color:#858585;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;">// precomputed scope</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">scopeComplete</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">execSync</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&#39;git status --porcelain || true&#39;</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">.</span><span style="color:#A1B567;">toString</span><span style="color:#858585;">()</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">.</span><span style="color:#A1B567;">trim</span><span style="color:#858585;">()</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">.</span><span style="color:#A1B567;">split</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&#39;</span><span style="color:#D4976C;">\\n</span><span style="color:#C98A7D;">&#39;</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">.</span><span style="color:#A1B567;">find</span><span style="color:#858585;">((</span><span style="color:#B8A965;">r</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">~</span><span style="color:#B8A965;">r</span><span style="color:#858585;">.</span><span style="color:#A1B567;">indexOf</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&#39;M  src&#39;</span><span style="color:#858585;">))</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">?.</span><span style="color:#A1B567;">replace</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">/</span><span style="color:#858585;">(</span><span style="color:#E6CC77;">\\/</span><span style="color:#858585;">)</span><span style="color:#C98A7D;">/</span><span style="color:#4D9375;">g</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;%%&#39;</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">?.</span><span style="color:#A1B567;">match</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">/</span><span style="color:#C4704F;">src%%</span><span style="color:#858585;">((</span><span style="color:#D4976C;">\\w</span><span style="color:#CB7676;">|</span><span style="color:#C4704F;">-</span><span style="color:#858585;">)</span><span style="color:#CB7676;">*</span><span style="color:#858585;">)</span><span style="color:#C98A7D;">/</span><span style="color:#858585;">)?.[</span><span style="color:#6394BF;">1</span><span style="color:#858585;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;">/** </span><span style="color:#858585;">@</span><span style="color:#CB7676;">type</span><span style="color:#758575;"> </span><span style="color:#858585;">{</span><span style="color:#A1B567;">import(&#39;cz-git&#39;).UserConfig</span><span style="color:#858585;">}</span><span style="color:#758575;"> */</span></span>
<span class="line"><span style="color:#E0A569;">module</span><span style="color:#858585;">.</span><span style="color:#E0A569;">exports</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">prompt</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">defaultScope</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">scopeComplete</span><span style="color:#858585;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">customScopesAlign</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">!</span><span style="color:#B8A965;">scopeComplete</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;top-bottom&#39;</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;bottom&#39;</span><span style="color:#858585;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">},</span></span>
<span class="line"><span style="color:#858585;">};</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// commitlint.config.js</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">execSync</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#B58451;">require</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&#39;child_process&#39;</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// precomputed scope</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">scopeComplete</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">execSync</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&#39;git status --porcelain || true&#39;</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">toString</span><span style="color:#8E8F8B;">()</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">trim</span><span style="color:#8E8F8B;">()</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">split</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&#39;</span><span style="color:#A65E2B;">\\n</span><span style="color:#B56959;">&#39;</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">find</span><span style="color:#8E8F8B;">((</span><span style="color:#8C862B;">r</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">~</span><span style="color:#8C862B;">r</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">indexOf</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&#39;M  src&#39;</span><span style="color:#8E8F8B;">))</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">?.</span><span style="color:#6C7834;">replace</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">/</span><span style="color:#8E8F8B;">(</span><span style="color:#BDA437;">\\/</span><span style="color:#8E8F8B;">)</span><span style="color:#B56959;">/</span><span style="color:#1C6B48;">g</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;%%&#39;</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">?.</span><span style="color:#6C7834;">match</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">/</span><span style="color:#AB5E3F;">src%%</span><span style="color:#8E8F8B;">((</span><span style="color:#A65E2B;">\\w</span><span style="color:#AB5959;">|</span><span style="color:#AB5E3F;">-</span><span style="color:#8E8F8B;">)</span><span style="color:#AB5959;">*</span><span style="color:#8E8F8B;">)</span><span style="color:#B56959;">/</span><span style="color:#8E8F8B;">)?.[</span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">/** </span><span style="color:#8E8F8B;">@</span><span style="color:#AB5959;">type</span><span style="color:#A0ADA0;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#6C7834;">import(&#39;cz-git&#39;).UserConfig</span><span style="color:#8E8F8B;">}</span><span style="color:#A0ADA0;"> */</span></span>
<span class="line"><span style="color:#B58451;">module</span><span style="color:#8E8F8B;">.</span><span style="color:#B58451;">exports</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">prompt</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">defaultScope</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">scopeComplete</span><span style="color:#8E8F8B;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">customScopesAlign</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">!</span><span style="color:#8C862B;">scopeComplete</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">?</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;top-bottom&#39;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;bottom&#39;</span><span style="color:#8E8F8B;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">},</span></span>
<span class="line"><span style="color:#8E8F8B;">};</span></span>
<span class="line"></span></code></pre></div><p><img src="https://user-images.githubusercontent.com/40693636/172989830-c3e436ad-adab-42f5-973f-b97f33748939.gif" alt="demo-gif"></p><br><br><br><blockquote><p>Using highly customizable <code>cz-git</code> makes committing more convenient and more customary. Welcome to share.</p></blockquote>`,8),e=[o];function c(t,r,y,i,B,A){return n(),a("div",null,e)}var D=s(p,[["render",c]]);export{C as __pageData,D as default};
